<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Calculate Metrics for Trauma System Performance • traumar</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Calculate Metrics for Trauma System Performance">
<meta name="description" content="Hospitals, hospital systems, and even trauma systems that provide care to injured patients may not be aware of robust metrics that can help gauge the efficacy of their programs in saving the lives of injured patients. traumar provides robust functions driven by the academic literature to automate the calculation of relevant metrics to individuals desiring to measure the performance of their trauma center or even a trauma system. traumar also provides some helper functions for the data analysis journey. Users can refer to the following publications for descriptions of the methods used in traumar. TRISS methodology, including probability of survival, and the W, M, and Z Scores - Flora (1978) &lt;doi:10.1097/00005373-197810000-00003&gt;, Boyd et al. (1987, PMID:3106646), Llullaku et al. (2009) &lt;doi:10.1186/1749-7922-4-2&gt;, Singh et al. (2011) &lt;doi:10.4103/0974-2700.86626&gt;, Baker et al. (1974, PMID:4814394), and Champion et al. (1989) &lt;doi:10.1097/00005373-198905000-00017&gt;. For the Relative Mortality Metric, see Napoli et al. (2017) &lt;doi:10.1080/24725579.2017.1325948&gt;, Schroeder et al. (2019) &lt;doi:10.1080/10903127.2018.1489021&gt;, and Kassar et al. (2016) &lt;doi:10.1177/00031348221093563&gt;. For more information about methods to calculate over- and under-triage in trauma hospital populations and samples, please see the following publications - Peng &amp; Xiang (2016) &lt;doi:10.1016/j.ajem.2016.08.061&gt;, Beam et al. (2022) &lt;doi:10.23937/2474-3674/1510136&gt;, Roden-Foreman et al. (2017) &lt;doi:10.1097/JTN.0000000000000283&gt;.">
<meta property="og:description" content="Hospitals, hospital systems, and even trauma systems that provide care to injured patients may not be aware of robust metrics that can help gauge the efficacy of their programs in saving the lives of injured patients. traumar provides robust functions driven by the academic literature to automate the calculation of relevant metrics to individuals desiring to measure the performance of their trauma center or even a trauma system. traumar also provides some helper functions for the data analysis journey. Users can refer to the following publications for descriptions of the methods used in traumar. TRISS methodology, including probability of survival, and the W, M, and Z Scores - Flora (1978) &lt;doi:10.1097/00005373-197810000-00003&gt;, Boyd et al. (1987, PMID:3106646), Llullaku et al. (2009) &lt;doi:10.1186/1749-7922-4-2&gt;, Singh et al. (2011) &lt;doi:10.4103/0974-2700.86626&gt;, Baker et al. (1974, PMID:4814394), and Champion et al. (1989) &lt;doi:10.1097/00005373-198905000-00017&gt;. For the Relative Mortality Metric, see Napoli et al. (2017) &lt;doi:10.1080/24725579.2017.1325948&gt;, Schroeder et al. (2019) &lt;doi:10.1080/10903127.2018.1489021&gt;, and Kassar et al. (2016) &lt;doi:10.1177/00031348221093563&gt;. For more information about methods to calculate over- and under-triage in trauma hospital populations and samples, please see the following publications - Peng &amp; Xiang (2016) &lt;doi:10.1016/j.ajem.2016.08.061&gt;, Beam et al. (2022) &lt;doi:10.23937/2474-3674/1510136&gt;, Roden-Foreman et al. (2017) &lt;doi:10.1097/JTN.0000000000000283&gt;.">
<meta property="og:image" content="https://bemts-hhs.github.io/traumar/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">traumar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bemts-hhs/traumar/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="traumar-">traumar 
<a class="anchor" aria-label="anchor" href="#traumar-"></a>
</h1>
</div>
<p>Continuous Quality Improvement (CQI) and Process Improvement (PI) are essential pillars of healthcare, particularly in the care of injured patients. However, hospitals, trauma systems, and their trauma program managers (TPMs) often lack access to standardized quality measures derived from academic literature. The {traumar} package addresses this gap by providing tools to calculate quality measures from trauma center or trauma system effectiveness and efficiency, to relative mortality efficiently and accurately. By automating these calculations, {traumar} empowers hospital systems, trauma networks, and TPMs to focus their efforts on analyzing outcomes and driving meaningful improvements in patient care. Whether you’re seeking to enhance PI initiatives or streamline CQI processes, {traumar} serves as a valuable resource for advancing trauma care quality.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <code>traumar</code> from <a href="https://github.com/bemts-hhs/traumar" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"bemts-hhs/traumar"</span><span class="op">)</span></span></code></pre></div>
<p>Additionally, you can install the CRAN version of <code>traumar</code> via:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"traumar"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="helper-functions">Helper Functions<a class="anchor" aria-label="anchor" href="#helper-functions"></a>
</h2>
<p>{traumar} has many functions to help you in your data analysis journey! In particular, if you do not presently have access to probability of survival data, {traumar} provides the <code><a href="reference/probability_of_survival.html">probability_of_survival()</a></code> function to do just that using the TRISS method. Check out the additional package documentation at <a href="https://bemts-hhs.github.io/traumar/" class="uri">https://bemts-hhs.github.io/traumar/</a> where you can find examples of each function the package has to offer.</p>
</div>
<div class="section level2">
<h2 id="trauma-system-evaluation-and-quality-improvement">Trauma System Evaluation and Quality Improvement<a class="anchor" aria-label="anchor" href="#trauma-system-evaluation-and-quality-improvement"></a>
</h2>
<p>{traumar} includes functions to allow users to calculate the efficiency and effectiveness of one or more trauma centers, or even a trauma system. The <code>seqic_indicator_*</code> family of functions affords users the logic and formulas to assess their center or system on topics of importance such as:</p>
<ul>
<li>Surgeon/physician/mid-level provider response times</li>
<li>Data Quality</li>
<li>Rate of autopsy among deceased trauma patients</li>
<li>Blood alcohol measurements / drug testing</li>
<li>Analysis of mortality among risk groups</li>
<li>Time from patient arrival to a) physical discharge, b) decision, c) time from decision to physical discharge</li>
<li>Trauma team activations</li>
<li>Under and over triage</li>
<li>…among many others. Please check the {traumar} <a href="https://bemts-hhs.github.io/traumar/" class="uri">https://bemts-hhs.github.io/traumar/</a> documentation to explore all these analytical opportunities</li>
</ul>
</div>
<div class="section level2">
<h2 id="calculating-the-w-score">Calculating the W-Score<a class="anchor" aria-label="anchor" href="#calculating-the-w-score"></a>
</h2>
<p>The W-Score tells us how many survivals (or deaths) on average out of every 100 cases seen in a trauma center. Using R, we can do this with the {traumar} package.</p>
<div class="section level3">
<h3 id="first-we-will-create-the-data-for-these-examples">First, we will create the data for these examples<a class="anchor" aria-label="anchor" href="#first-we-will-create-the-data-for-these-examples"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Generate example data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Parameters</span></span>
<span><span class="va">n_patients</span> <span class="op">&lt;-</span> <span class="fl">5000</span>  <span class="co"># Total number of patients</span></span>
<span></span>
<span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, size <span class="op">=</span> <span class="va">n_patients</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Arbitrary group labels</span></span>
<span></span>
<span><span class="va">trauma_type_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Blunt"</span>, <span class="st">"Penetrating"</span><span class="op">)</span>, size <span class="op">=</span> <span class="va">n_patients</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Trauma types</span></span>
<span></span>
<span><span class="va">rts_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">7.8408</span>, by <span class="op">=</span> <span class="fl">0.005</span><span class="op">)</span>, size <span class="op">=</span> <span class="va">n_patients</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># RTS values</span></span>
<span></span>
<span><span class="va">ages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, size <span class="op">=</span> <span class="va">n_patients</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># patient ages</span></span>
<span></span>
<span><span class="va">iss_scores</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">75</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, size <span class="op">=</span> <span class="va">n_patients</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># ISS scores</span></span>
<span></span>
<span><span class="co"># Generate survival probabilities (Ps)</span></span>
<span><span class="va">Ps</span> <span class="op">&lt;-</span> <span class="fu">traumar</span><span class="fu">::</span><span class="fu"><a href="reference/probability_of_survival.html">probability_of_survival</a></span><span class="op">(</span>trauma_type <span class="op">=</span> <span class="va">trauma_type_values</span>, age <span class="op">=</span> <span class="va">ages</span>, rts <span class="op">=</span> <span class="va">rts_values</span>, iss <span class="op">=</span> <span class="va">iss_scores</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Simulate survival outcomes based on Ps</span></span>
<span><span class="va">survival_outcomes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_patients</span>, size <span class="op">=</span> <span class="fl">1</span>, prob <span class="op">=</span> <span class="va">Ps</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create data frame</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Ps <span class="op">=</span> <span class="va">Ps</span>, survival <span class="op">=</span> <span class="va">survival_outcomes</span>, groups <span class="op">=</span> <span class="va">groups</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>death <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">survival</span> <span class="op">==</span> <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-w-score">The W-Score!<a class="anchor" aria-label="anchor" href="#the-w-score"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Calculate trauma performance (W, M, Z scores)</span></span>
<span><span class="fu"><a href="reference/trauma_performance.html">trauma_performance</a></span><span class="op">(</span><span class="va">data</span>, Ps_col <span class="op">=</span> <span class="va">Ps</span>, outcome_col <span class="op">=</span> <span class="va">death</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 9</span></span>
<span><span class="co">#&gt;   N_Patients N_Survivors N_Deaths Predicted_Survivors Predicted_Deaths</span></span>
<span><span class="co">#&gt;        &lt;int&gt;       &lt;int&gt;    &lt;int&gt;               &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1       5000        1701     3299               1711.            3289.</span></span>
<span><span class="co">#&gt; # ℹ 4 more variables: Patient_Estimate &lt;dbl&gt;, W_Score &lt;dbl&gt;, M_Score &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   Z_Score &lt;dbl&gt;</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="comparing-the-probability-of-survival-distribution-of-your-patient-mix-to-the-major-trauma-outcomes-study">Comparing the Probability of Survival Distribution of your Patient Mix to the Major Trauma Outcomes Study<a class="anchor" aria-label="anchor" href="#comparing-the-probability-of-survival-distribution-of-your-patient-mix-to-the-major-trauma-outcomes-study"></a>
</h2>
<p>The M and Z scores are calculated using methods defined in the literature (Champion et al., 1990, Flora, 1978) may not be meaningful if the distribution of the probability of survival measure is not similar enough to the Major Trauma Outcomes Study distribution. {traumar} provides a way to check this in your data analysis script, or even from the console. The <code><a href="reference/trauma_performance.html">trauma_performance()</a></code> function does this under the hood for you, so you can get a read out of how much confidence you can put into the Z score.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Compare the current case mix with the MTOS case mix</span></span>
<span><span class="fu"><a href="reference/trauma_case_mix.html">trauma_case_mix</a></span><span class="op">(</span><span class="va">data</span>, Ps_col <span class="op">=</span> <span class="va">Ps</span>, outcome_col <span class="op">=</span> <span class="va">death</span><span class="op">)</span></span>
<span><span class="co">#&gt;      Ps_range current_fraction MTOS_distribution survivals predicted_survivals</span></span>
<span><span class="co">#&gt; 1 0.00 - 0.25           0.5414             0.010      2534            187.9191</span></span>
<span><span class="co">#&gt; 2 0.26 - 0.50           0.1432             0.043       468            269.5871</span></span>
<span><span class="co">#&gt; 3 0.51 - 0.75           0.1278             0.000       217            405.8877</span></span>
<span><span class="co">#&gt; 4 0.76 - 0.90           0.0870             0.052        58            366.1312</span></span>
<span><span class="co">#&gt; 5 0.91 - 0.95           0.0508             0.053        18            237.6390</span></span>
<span><span class="co">#&gt; 6 0.96 - 1.00           0.0498             0.842         4            243.4833</span></span>
<span><span class="co">#&gt;   deaths predicted_deaths count</span></span>
<span><span class="co">#&gt; 1    173      2519.080869  2707</span></span>
<span><span class="co">#&gt; 2    248       446.412896   716</span></span>
<span><span class="co">#&gt; 3    422       233.112251   639</span></span>
<span><span class="co">#&gt; 4    377        68.868790   435</span></span>
<span><span class="co">#&gt; 5    236        16.361033   254</span></span>
<span><span class="co">#&gt; 6    245         5.516716   249</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-relative-mortality-metric">The Relative Mortality Metric<a class="anchor" aria-label="anchor" href="#the-relative-mortality-metric"></a>
</h2>
<p>Napoli et al.(2017) published methods for calculating a measure of trauma center (or system) performance while overcoming a problem with the W-Score and the TRISS methodology. Given that the majority of patients seen at trauma centers will have a probability of survival over 90%, estimating performance based on the W-Score may only indicate how well a center performed with lower acuity patients. Using Napoli et al. (2017), it is possible to calculate a score that is similar to the W-Score in its interpretability, but deals with the negatively skewed probability of survival problem by creating non-linear bins of score ranges, and then weighting a score based on the nature of those bins. The Relative Mortality Metric (RMM) has a scale from -1 to 1.</p>
<ul>
<li>An RMM of 0 indicates that the observed mortality aligns with the expected national benchmark across all acuity levels.</li>
<li>An RMM greater than 0 indicates better-than-expected performance, where the center is outperforming the national benchmark.</li>
<li>An RMM less than 0 indicates under-performance, where the center’s observed mortality is higher than the expected benchmark.</li>
</ul>
</div>
<div class="section level2">
<h2 id="non-linear-binning-algorithm">Non-Linear Binning Algorithm<a class="anchor" aria-label="anchor" href="#non-linear-binning-algorithm"></a>
</h2>
<p>An important part of the approach Napoli et al. (2017) took was to modify the M-Score approach of looking at linear bins of the probability of survival distribution, and make it non-linear. The {traumar} package does this for you using Dr. Napoli’s method:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Apply the nonlinear_bins function</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/nonlinear_bins.html">nonlinear_bins</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>,</span>
<span>                         Ps_col <span class="op">=</span> <span class="va">Ps</span>,</span>
<span>                         outcome_col <span class="op">=</span> <span class="va">survival</span>,</span>
<span>                         divisor1 <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                         divisor2 <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                         threshold_1 <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>                         threshold_2 <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View intervals created by the algorithm</span></span>
<span><span class="va">results</span><span class="op">$</span><span class="va">intervals</span></span>
<span><span class="co">#&gt; [1] 0.0002015449 0.0256191282 0.1455317587 0.4842820556 0.9003870455</span></span>
<span><span class="co">#&gt; [6] 0.9285354475 0.9518925450 0.9722272703 0.9968989233</span></span>
<span></span>
<span><span class="co"># View the bin statistics</span></span>
<span><span class="va">results</span><span class="op">$</span><span class="va">bin_stats</span></span>
<span><span class="co">#&gt; # A tibble: 8 × 13</span></span>
<span><span class="co">#&gt;   bin_number bin_start bin_end    mean      sd Pred_Survivors_b Pred_Deaths_b</span></span>
<span><span class="co">#&gt;        &lt;int&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;            &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1          1  0.000202  0.0256 0.00935 0.00722             10.4       1106.  </span></span>
<span><span class="co">#&gt; 2          2  0.0256    0.146  0.0732  0.0345              81.7       1033.  </span></span>
<span><span class="co">#&gt; 3          3  0.146     0.484  0.293   0.0959             327.         788.  </span></span>
<span><span class="co">#&gt; 4          4  0.484     0.900  0.697   0.124              777.         337.  </span></span>
<span><span class="co">#&gt; 5          5  0.900     0.929  0.916   0.00790            114.          10.5 </span></span>
<span><span class="co">#&gt; 6          6  0.929     0.952  0.940   0.00680            117.           7.50</span></span>
<span><span class="co">#&gt; 7          7  0.952     0.972  0.963   0.00564            120.           4.65</span></span>
<span><span class="co">#&gt; 8          8  0.972     0.997  0.984   0.00686            162.           2.67</span></span>
<span><span class="co">#&gt; # ℹ 6 more variables: AntiS_b &lt;dbl&gt;, AntiM_b &lt;dbl&gt;, alive &lt;int&gt;, dead &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   count &lt;int&gt;, percent &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-rmm-function">The RMM function<a class="anchor" aria-label="anchor" href="#the-rmm-function"></a>
</h2>
<p>The RMM is sensitive to higher acuity patients, meaning that if a trauma center struggles with these patients, it will be reflected in the RMM. In contrast, the W-Score may mask declines in performance due to the influence of lower acuity patients via the MTOS Distribution. The {traumar} package automates RMM calculation as a single score using the nonlinear binning method from Napoli et al. (2017). The <code><a href="reference/rmm.html">rmm()</a></code> and <code><a href="reference/rm_bin_summary.html">rm_bin_summary()</a></code> functions internally call <code><a href="reference/nonlinear_bins.html">nonlinear_bins()</a></code> to generate the non-linear binning process. The function uses bootstrap sampling with <code>n_samples</code> to simulate an RMM distribution and estimate 95% confidence intervals. The RMM, along with corresponding confidence intervals, are provided for the population in <code>data</code>, as well.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Example usage of the `rmm()` function</span></span>
<span><span class="fu"><a href="reference/rmm.html">rmm</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>,</span>
<span>    Ps_col <span class="op">=</span> <span class="va">Ps</span>,</span>
<span>    outcome_col <span class="op">=</span> <span class="va">survival</span>,</span>
<span>    n_samples <span class="op">=</span> <span class="fl">250</span>,</span>
<span>    Divisor1 <span class="op">=</span> <span class="fl">4</span>,</span>
<span>    Divisor2 <span class="op">=</span> <span class="fl">4</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 8</span></span>
<span><span class="co">#&gt;   population_RMM_LL population_RMM population_RMM_UL population_CI</span></span>
<span><span class="co">#&gt;               &lt;dbl&gt;          &lt;dbl&gt;             &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1            -0.106        0.00247             0.111         0.108</span></span>
<span><span class="co">#&gt; # ℹ 4 more variables: bootstrap_RMM_LL &lt;dbl&gt;, bootstrap_RMM &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   bootstrap_RMM_UL &lt;dbl&gt;, bootstrap_CI &lt;dbl&gt;</span></span>
<span></span>
<span><span class="co"># Pivoting can be helpful at times</span></span>
<span><span class="fu"><a href="reference/rmm.html">rmm</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  Ps_col <span class="op">=</span> <span class="va">Ps</span>,</span>
<span>  outcome_col <span class="op">=</span> <span class="va">survival</span>,</span>
<span>  n_samples <span class="op">=</span> <span class="fl">250</span>,</span>
<span>  Divisor1 <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  Divisor2 <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  pivot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 8 × 2</span></span>
<span><span class="co">#&gt;   stat                  value</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                 &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 population_RMM_LL -0.106   </span></span>
<span><span class="co">#&gt; 2 population_RMM     0.00247 </span></span>
<span><span class="co">#&gt; 3 population_RMM_UL  0.111   </span></span>
<span><span class="co">#&gt; 4 population_CI      0.108   </span></span>
<span><span class="co">#&gt; 5 bootstrap_RMM_LL   0.000492</span></span>
<span><span class="co">#&gt; 6 bootstrap_RMM      0.00218 </span></span>
<span><span class="co">#&gt; 7 bootstrap_RMM_UL   0.00386 </span></span>
<span><span class="co">#&gt; 8 bootstrap_CI       0.00168</span></span>
<span></span>
<span><span class="co"># RMM calculated by non-linear bin range</span></span>
<span><span class="co"># `rm_bin_summary()` function</span></span>
<span><span class="fu"><a href="reference/rm_bin_summary.html">rm_bin_summary</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>,</span>
<span>               Ps_col <span class="op">=</span> <span class="va">Ps</span>,</span>
<span>               outcome_col <span class="op">=</span> <span class="va">survival</span>,</span>
<span>               Divisor1 <span class="op">=</span> <span class="fl">4</span>,</span>
<span>               Divisor2 <span class="op">=</span> <span class="fl">4</span>,</span>
<span>               n_samples <span class="op">=</span> <span class="fl">250</span></span>
<span>               <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 8 × 19</span></span>
<span><span class="co">#&gt;   bin_number  TA_b  TD_b   N_b  EM_b AntiS_b AntiM_b bin_start bin_end midpoint</span></span>
<span><span class="co">#&gt;        &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1          1     9  1107  1116 0.992 0.00935  0.991   0.000202  0.0256   0.0129</span></span>
<span><span class="co">#&gt; 2          2    72  1043  1115 0.935 0.0732   0.927   0.0256    0.146    0.0856</span></span>
<span><span class="co">#&gt; 3          3   300   815  1115 0.731 0.293    0.707   0.146     0.484    0.315 </span></span>
<span><span class="co">#&gt; 4          4   805   309  1114 0.277 0.697    0.303   0.484     0.900    0.692 </span></span>
<span><span class="co">#&gt; 5          5   115    10   125 0.08  0.916    0.0844  0.900     0.929    0.914 </span></span>
<span><span class="co">#&gt; 6          6   116     9   125 0.072 0.940    0.0600  0.929     0.952    0.940 </span></span>
<span><span class="co">#&gt; 7          7   119     6   125 0.048 0.963    0.0372  0.952     0.972    0.962 </span></span>
<span><span class="co">#&gt; 8          8   165     0   165 0     0.984    0.0162  0.972     0.997    0.985 </span></span>
<span><span class="co">#&gt; # ℹ 9 more variables: R_b &lt;dbl&gt;, population_RMM_LL &lt;dbl&gt;, population_RMM &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   population_RMM_UL &lt;dbl&gt;, population_CI &lt;dbl&gt;, bootstrap_RMM_LL &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   bootstrap_RMM &lt;dbl&gt;, bootstrap_RMM_UL &lt;dbl&gt;, bootstrap_CI &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that the traumar project is released with a <a href="https://bemts-hhs.github.io/traumar/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=traumar" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/bemts-hhs/traumar/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/bemts-hhs/traumar/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
<li><a href="SUPPORT.html">Getting help</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing traumar</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Nicolas Foss <br><small class="roles"> Author, maintainer </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://github.com/bemts-hhs/traumar/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/bemts-hhs/traumar/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://CRAN.R-project.org/package=traumar" class="external-link"><img src="https://www.r-pkg.org/badges/version/traumar" alt="CRAN status"></a></li>
<li><a href="https://app.codecov.io/gh/bemts-hhs/traumar" class="external-link"><img src="https://codecov.io/gh/bemts-hhs/traumar/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicolas Foss.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
