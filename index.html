<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Calculate Metrics Relevant to Trauma System Performance • traumar</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Calculate Metrics Relevant to Trauma System Performance">
<meta name="description" content="Hospitals, hospital systems, and even trauma systems that provide care to injured patients may not be aware of robust metrics that can help gauge the efficacy of their programs in saving the lives of injured patients. This R package provides robust functions driven by the academic literature to automate the calculation of relevant metrics, and provides some helper functions for the data analysis journey.">
<meta property="og:description" content="Hospitals, hospital systems, and even trauma systems that provide care to injured patients may not be aware of robust metrics that can help gauge the efficacy of their programs in saving the lives of injured patients. This R package provides robust functions driven by the academic literature to automate the calculation of relevant metrics, and provides some helper functions for the data analysis journey.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">traumar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<p><img src="reference/figures/traumar_sticker.png" align="right" width="150"></p>
<div class="section level1">
<div class="page-header"><h1 id="traumar">traumar<a class="anchor" aria-label="anchor" href="#traumar"></a>
</h1></div>
<p>Continuous Quality Improvement (CQI) and Process Improvement (PI) are essential pillars of healthcare, particularly in the care of injured patients. However, hospitals, trauma systems, and their trauma program managers (TPMs) often lack access to standardized quality measures derived from academic literature. The {traumar} package addresses this gap by providing tools to calculate quality measures related to relative mortality efficiently and accurately. By automating these calculations, {traumar} empowers hospital systems, trauma networks, and TPMs to focus their efforts on analyzing outcomes and driving meaningful improvements in patient care. Whether you’re seeking to enhance PI initiatives or streamline CQI processes, {traumar} serves as a valuable resource for advancing trauma care quality.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of traumar from <a href="https://github.com/bemts-hhs/traumar" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"bemts-hhs/traumar"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="calculating-the-w-score">Calculating the W-Score<a class="anchor" aria-label="anchor" href="#calculating-the-w-score"></a>
</h2>
<p>The W-Score tells us how many survivals (or deaths) on average out of every 100 cases seen in a trauma center. Using R, we can do this with the {traumar} package.</p>
<div class="section level3">
<h3 id="first-we-will-create-the-data-for-these-examples">First, we will create the data for these examples<a class="anchor" aria-label="anchor" href="#first-we-will-create-the-data-for-these-examples"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Generate example data with high negative skewness</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Parameters</span></span>
<span><span class="va">n_patients</span> <span class="op">&lt;-</span> <span class="fl">10000</span>  <span class="co"># Total number of patients</span></span>
<span></span>
<span><span class="co"># Generate survival probabilities (Ps) using a logistic distribution</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>  <span class="co"># For reproducibility</span></span>
<span><span class="va">Ps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n_patients</span>, mean <span class="op">=</span> <span class="fl">2</span>, sd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Skewed towards higher values</span></span>
<span></span>
<span><span class="co"># Simulate survival outcomes based on Ps</span></span>
<span><span class="va">survival_outcomes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_patients</span>, size <span class="op">=</span> <span class="fl">1</span>, prob <span class="op">=</span> <span class="va">Ps</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create data frame</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Ps <span class="op">=</span> <span class="va">Ps</span>, survival <span class="op">=</span> <span class="va">survival_outcomes</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>death <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">survival</span> <span class="op">==</span> <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-w-score">The W-Score!<a class="anchor" aria-label="anchor" href="#the-w-score"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Calculate trauma performance (W, M, Z scores)</span></span>
<span><span class="fu"><a href="reference/trauma_performance.html">trauma_performance</a></span><span class="op">(</span><span class="va">data</span>, Ps_col <span class="op">=</span> <span class="va">Ps</span>, outcome_col <span class="op">=</span> <span class="va">death</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 2</span></span>
<span><span class="co">#&gt;    Calculation_Name        Value</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 N_Patients          10000    </span></span>
<span><span class="co">#&gt;  2 N_Survivors          8137    </span></span>
<span><span class="co">#&gt;  3 N_Deaths             1863    </span></span>
<span><span class="co">#&gt;  4 Predicted_Survivors  8097.   </span></span>
<span><span class="co">#&gt;  5 Predicted_Deaths     1903.   </span></span>
<span><span class="co">#&gt;  6 SE_Predictions         34.2  </span></span>
<span><span class="co">#&gt;  7 Patient_Estimate       40.3  </span></span>
<span><span class="co">#&gt;  8 W_Score                 0.403</span></span>
<span><span class="co">#&gt;  9 M_Score                 0.374</span></span>
<span><span class="co">#&gt; 10 Z_Score                 1.18</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="comparing-the-probability-of-survival-distribution-of-your-patient-mix-to-the-major-trauma-outcomes-study">Comparing the Probability of Survival Distribution of your Patient Mix to the <a href="https://journals.lww.com/jtrauma/Abstract/1990/11000/The_Major_Trauma_Outcome_Study__Establishing.8.aspx" class="external-link">Major Trauma Outcomes Study</a>
<a class="anchor" aria-label="anchor" href="#comparing-the-probability-of-survival-distribution-of-your-patient-mix-to-the-major-trauma-outcomes-study"></a>
</h2>
<p>The M and Z scores are calculated using methods defined in the <a href="https://journals.lww.com/jtrauma/abstract/1978/10000/a_method_for_comparing_survival_of_burn_patients.3.aspx" class="external-link">literature</a> may not be meaningful if your the distribution of the probability of survival measure is not similar enough to the Major Trauma Outcomes Study distribution. {traumar} provides a way to check this in your data analysis script, or even from the console. The <code><a href="reference/trauma_performance.html">trauma_performance()</a></code> function does this under the hood for you, so you can get a read out of how much confidence you can put into the Z score.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Compare the current case mix with the MTOS case mix</span></span>
<span><span class="fu"><a href="reference/trauma_case_mix.html">trauma_case_mix</a></span><span class="op">(</span><span class="va">data</span>, Ps_col <span class="op">=</span> <span class="va">Ps</span>, outcome_col <span class="op">=</span> <span class="va">death</span><span class="op">)</span></span>
<span><span class="co">#&gt;      Ps_range current_fraction MTOS_distribution</span></span>
<span><span class="co">#&gt; 1 0.00 - 0.25           0.0209             0.010</span></span>
<span><span class="co">#&gt; 2 0.26 - 0.50           0.0742             0.043</span></span>
<span><span class="co">#&gt; 3 0.51 - 0.75           0.1907             0.000</span></span>
<span><span class="co">#&gt; 4 0.76 - 0.90           0.3000             0.052</span></span>
<span><span class="co">#&gt; 5 0.91 - 0.95           0.1979             0.053</span></span>
<span><span class="co">#&gt; 6 0.96 - 1.00           0.2163             0.842</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-relative-mortality-metric">The Relative Mortality Metric<a class="anchor" aria-label="anchor" href="#the-relative-mortality-metric"></a>
</h2>
<p><a href="https://www.tandfonline.com/doi/abs/10.1080/24725579.2017.1325948" class="external-link">Napoli et al. (2017)</a> published methods for calculating a measure of trauma center (or system) performance while overcoming a problem with the W-Score and the TRISS methodology. Given that the majority of patients seen at trauma centers will have a probability of survival over 90%, estimating performance based on the W-Score may only indicate how well a center performed with lower acuity patients. Using Napoli et al. (2017), it is possible to calculate a score that is similar to the W-Score in its interpretability, but deals with the negatively skewed probability of survival problem by creating non-linear bins of score ranges, and then weighting a score based on the nature of those bins. The Relative Mortality Metric (RMM) has a scale from -1 to 1, where</p>
<ul>
<li>An RMM of 0 indicates that the observed mortality aligns with the expected national benchmark across all acuity levels.</li>
<li>An RMM greater than 0 indicates better-than-expected performance, where the center is outperforming the national benchmark.</li>
<li>An RMM less than 0 indicates under-performance, where the center’s observed mortality is higher than the expected benchmark.</li>
</ul>
<p>The RMM is helpful in that it will be sensitive to higher acuity patients as well, so if a trauma center is struggling to effectively intervene with higher acuity patients, this will be reflected in the RMM. Conversely, with the W-Score, trauma center performance may not appear to decline due to the influence of the lower acuity patients using the MTOS Distribution. {traumar} automates the calculation of the RMM as a single score, and by the non-linear binning process recommended by Napoli et al. (2017).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Example usage of the `rmm()` function</span></span>
<span><span class="fu"><a href="reference/rmm.html">rmm</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>,</span>
<span>    Ps_col <span class="op">=</span> <span class="va">Ps</span>,</span>
<span>    outcome_col <span class="op">=</span> <span class="va">survival</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ Data validation passed.</span></span>
<span><span class="co">#&gt;    numerator denominator        E_b     RMM_LL       RMM    RMM_UL</span></span>
<span><span class="co">#&gt; 1 0.06649169   0.4776776 0.07660905 0.06258879 0.1391978 0.2158069</span></span>
<span></span>
<span><span class="co"># Pivoting can be helpful at times</span></span>
<span><span class="fu"><a href="reference/rmm.html">rmm</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  Ps_col <span class="op">=</span> <span class="va">Ps</span>,</span>
<span>  outcome_col <span class="op">=</span> <span class="va">survival</span>,</span>
<span>  pivot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ Data validation passed.</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 2</span></span>
<span><span class="co">#&gt;   coefficient  value</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 numerator   0.0665</span></span>
<span><span class="co">#&gt; 2 denominator 0.478 </span></span>
<span><span class="co">#&gt; 3 E_b         0.0766</span></span>
<span><span class="co">#&gt; 4 RMM_LL      0.0626</span></span>
<span><span class="co">#&gt; 5 RMM         0.139 </span></span>
<span><span class="co">#&gt; 6 RMM_UL      0.216</span></span>
<span></span>
<span><span class="co"># RMM calculated by non-linear bin range</span></span>
<span><span class="co"># `rm_bin_summary()` function</span></span>
<span><span class="fu"><a href="reference/rm_bin_summary.html">rm_bin_summary</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>,</span>
<span>               Ps_col <span class="op">=</span> <span class="va">Ps</span>,</span>
<span>               outcome_col <span class="op">=</span> <span class="va">survival</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ Data validation passed.</span></span>
<span><span class="co">#&gt;    bin_number TA_b TD_b  N_b       EM_b  bin_start   bin_end  midpoint</span></span>
<span><span class="co">#&gt; 1           1  454  657 1111 0.59135914 0.02257717 0.5423470 0.2824621</span></span>
<span><span class="co">#&gt; 2           2  686  425 1111 0.38253825 0.54234698 0.7015426 0.6219448</span></span>
<span><span class="co">#&gt; 3           3  850  261 1111 0.23492349 0.70154257 0.7958116 0.7486771</span></span>
<span><span class="co">#&gt; 4           4  922  189 1111 0.17011701 0.79581165 0.8571453 0.8264785</span></span>
<span><span class="co">#&gt; 5           5  971  139 1110 0.12522523 0.85714527 0.9000576 0.8786014</span></span>
<span><span class="co">#&gt; 6           6  727   78  805 0.09689441 0.90005763 0.9251891 0.9126234</span></span>
<span><span class="co">#&gt; 7           7  752   53  805 0.06583851 0.92518915 0.9460383 0.9356137</span></span>
<span><span class="co">#&gt; 8           8  779   26  805 0.03229814 0.94603830 0.9626674 0.9543529</span></span>
<span><span class="co">#&gt; 9           9  783   22  805 0.02732919 0.96266743 0.9762396 0.9694535</span></span>
<span><span class="co">#&gt; 10         10 1213   13 1226 0.01060359 0.97623957 0.9995787 0.9879091</span></span>
<span><span class="co">#&gt;           R_b    AntiM_b         E_b     numerator  denominator       RMM_LL</span></span>
<span><span class="co">#&gt; 1  0.51976981 0.71753793 0.026472901  6.558393e-02 0.3729545526  0.149376746</span></span>
<span><span class="co">#&gt; 2  0.15919559 0.37805523 0.028513634 -7.136780e-04 0.0601847250 -0.040371760</span></span>
<span><span class="co">#&gt; 3  0.09426908 0.25132289 0.025507174  1.545956e-03 0.0236919780  0.039745137</span></span>
<span><span class="co">#&gt; 4  0.06133362 0.17352154 0.022268528  2.088121e-04 0.0106427043 -0.002648313</span></span>
<span><span class="co">#&gt; 5  0.04291236 0.12139855 0.019213093 -1.642116e-04 0.0052094984 -0.050734668</span></span>
<span><span class="co">#&gt; 6  0.02513152 0.08737661 0.019507496 -2.391967e-04 0.0021959070 -0.128435935</span></span>
<span><span class="co">#&gt; 7  0.02084916 0.06438627 0.016955206 -3.027788e-05 0.0013423995 -0.039510248</span></span>
<span><span class="co">#&gt; 8  0.01662913 0.04564713 0.014418476  2.219822e-04 0.0007590721  0.278020373</span></span>
<span><span class="co">#&gt; 9  0.01357214 0.03054650 0.011887823  4.366569e-05 0.0004145813  0.093436964</span></span>
<span><span class="co">#&gt; 10 0.02333909 0.01209088 0.006117843  3.471206e-05 0.0002821901  0.116891645</span></span>
<span><span class="co">#&gt;            RMM       RMM_UL</span></span>
<span><span class="co">#&gt; 1   0.17584965  0.202322549</span></span>
<span><span class="co">#&gt; 2  -0.01185813  0.016655509</span></span>
<span><span class="co">#&gt; 3   0.06525231  0.090759485</span></span>
<span><span class="co">#&gt; 4   0.01962021  0.041888743</span></span>
<span><span class="co">#&gt; 5  -0.03152157 -0.012308481</span></span>
<span><span class="co">#&gt; 6  -0.10892844 -0.089420943</span></span>
<span><span class="co">#&gt; 7  -0.02255504 -0.005599836</span></span>
<span><span class="co">#&gt; 8   0.29243885  0.306857325</span></span>
<span><span class="co">#&gt; 9   0.10532479  0.117212609</span></span>
<span><span class="co">#&gt; 10  0.12300949  0.129127331</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="there-is-more">There is More!<a class="anchor" aria-label="anchor" href="#there-is-more"></a>
</h2>
<p>{traumar} has other functions to help you in your data analysis journey! Check out the additional package documentation at <a href="https://bemts-hhs/github.io/trauma" class="external-link">bemts-hhs/github.io/trauma</a> where you can find examples of each function the package has to offer.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing traumar</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Nicolas Foss <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/bemts-hhs/traumar/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/bemts-hhs/traumar/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://CRAN.R-project.org/package=traumar" class="external-link"><img src="https://www.r-pkg.org/badges/version/traumar" alt="CRAN status"></a></li>
<li><a href="https://app.codecov.io/gh/bemts-hhs/traumar" class="external-link"><img src="https://codecov.io/gh/bemts-hhs/traumar/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicolas Foss.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
