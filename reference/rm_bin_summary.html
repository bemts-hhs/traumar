<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Bin-Level Summary for Relative Mortality Metric (RMM) — rm_bin_summary • traumar</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Bin-Level Summary for Relative Mortality Metric (RMM) — rm_bin_summary"><meta name="description" content="Calculates a bin-level summary for the Relative Mortality Metric (RMM) from
Napoli et al. (2017) by grouping data into bins based on survival
probabilities (Ps) and summarizing outcomes within each bin. This function
returns statistics such as total alive, total dead, estimated mortality,
anticipated mortality, and confidence intervals for each bin. For more
information on the methods used in this function, see as well Schroeder et
al. (2019), and Kassar et al. (2016).
The Relative Mortality Metric (RMM) quantifies the performance of a center in
comparison to the anticipated mortality based on the TRISS national
benchmark. The RMM measures the difference between observed and expected
mortality, with a range from -1 to 1.
An RMM of 0 indicates that the observed mortality aligns with the expected
national benchmark across all acuity levels.
An RMM greater than 0 indicates better-than-expected performance, where
the center is outperforming the national benchmark.
An RMM less than 0 indicates under-performance, where the center’s observed
mortality is higher than the expected benchmark.


This metric helps assess how a center's mortality compares to the national
standards, guiding quality improvement efforts.rm_bin_summary() utilizes
bootstrap sampling to calculate the confidence intervals via the standard
error method."><meta property="og:description" content="Calculates a bin-level summary for the Relative Mortality Metric (RMM) from
Napoli et al. (2017) by grouping data into bins based on survival
probabilities (Ps) and summarizing outcomes within each bin. This function
returns statistics such as total alive, total dead, estimated mortality,
anticipated mortality, and confidence intervals for each bin. For more
information on the methods used in this function, see as well Schroeder et
al. (2019), and Kassar et al. (2016).
The Relative Mortality Metric (RMM) quantifies the performance of a center in
comparison to the anticipated mortality based on the TRISS national
benchmark. The RMM measures the difference between observed and expected
mortality, with a range from -1 to 1.
An RMM of 0 indicates that the observed mortality aligns with the expected
national benchmark across all acuity levels.
An RMM greater than 0 indicates better-than-expected performance, where
the center is outperforming the national benchmark.
An RMM less than 0 indicates under-performance, where the center’s observed
mortality is higher than the expected benchmark.


This metric helps assess how a center's mortality compares to the national
standards, guiding quality improvement efforts.rm_bin_summary() utilizes
bootstrap sampling to calculate the confidence intervals via the standard
error method."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">traumar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bemts-hhs/traumar/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Bin-Level Summary for Relative Mortality Metric (RMM)</h1>
      <small class="dont-index">Source: <a href="https://github.com/bemts-hhs/traumar/blob/main/R/relative_mortality.R" class="external-link"><code>R/relative_mortality.R</code></a></small>
      <div class="d-none name"><code>rm_bin_summary.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates a bin-level summary for the Relative Mortality Metric (RMM) from
Napoli et al. (2017) by grouping data into bins based on survival
probabilities (Ps) and summarizing outcomes within each bin. This function
returns statistics such as total alive, total dead, estimated mortality,
anticipated mortality, and confidence intervals for each bin. For more
information on the methods used in this function, see as well Schroeder et
al. (2019), and Kassar et al. (2016).</p>
<p>The Relative Mortality Metric (RMM) quantifies the performance of a center in
comparison to the anticipated mortality based on the TRISS national
benchmark. The RMM measures the difference between observed and expected
mortality, with a range from -1 to 1.</p><ul><li><p>An RMM of 0 indicates that the observed mortality aligns with the expected
national benchmark across all acuity levels.</p></li>
<li><p>An RMM greater than 0 indicates better-than-expected performance, where
the center is outperforming the national benchmark.</p></li>
<li><p>An RMM less than 0 indicates under-performance, where the center’s observed
mortality is higher than the expected benchmark.</p></li>
</ul><p>This metric helps assess how a center's mortality compares to the national
standards, guiding quality improvement efforts.<code>rm_bin_summary()</code> utilizes
bootstrap sampling to calculate the confidence intervals via the standard
error method.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rm_bin_summary</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">Ps_col</span>,</span>
<span>  <span class="va">outcome_col</span>,</span>
<span>  group_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_samples <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  Divisor1 <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  Divisor2 <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  Threshold_1 <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  Threshold_2 <span class="op">=</span> <span class="fl">0.99</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame or tibble containing the data.</p></dd>


<dt id="arg-ps-col">Ps_col<a class="anchor" aria-label="anchor" href="#arg-ps-col"></a></dt>
<dd><p>The name of the column containing the survival probabilities
(Ps). Should be numeric on a scale from 0 to 1.</p></dd>


<dt id="arg-outcome-col">outcome_col<a class="anchor" aria-label="anchor" href="#arg-outcome-col"></a></dt>
<dd><p>The name of the column containing the outcome data. It
should be binary, with values indicating patient survival. A value of <code>1</code>
should represent "alive" (survived), while <code>0</code> should represent "dead" (did
not survive). Ensure the column contains only these two possible values.</p></dd>


<dt id="arg-group-vars">group_vars<a class="anchor" aria-label="anchor" href="#arg-group-vars"></a></dt>
<dd><p>Optional character vector specifying grouping variables for
stratified analysis. If <code>NULL</code>, the calculation is performed on the entire
dataset.</p></dd>


<dt id="arg-n-samples">n_samples<a class="anchor" aria-label="anchor" href="#arg-n-samples"></a></dt>
<dd><p>A numeric value indicating the number of bootstrap samples
to take from the data source.</p></dd>


<dt id="arg-divisor-">Divisor1<a class="anchor" aria-label="anchor" href="#arg-divisor-"></a></dt>
<dd><p>A divisor used for binning the survival probabilities
(default is 5).</p></dd>


<dt id="arg-divisor-">Divisor2<a class="anchor" aria-label="anchor" href="#arg-divisor-"></a></dt>
<dd><p>A second divisor used for binning the survival probabilities
(default is 5).</p></dd>


<dt id="arg-threshold-">Threshold_1<a class="anchor" aria-label="anchor" href="#arg-threshold-"></a></dt>
<dd><p>The first threshold for dividing the survival
probabilities (default is 0.9).</p></dd>


<dt id="arg-threshold-">Threshold_2<a class="anchor" aria-label="anchor" href="#arg-threshold-"></a></dt>
<dd><p>The second threshold for dividing the survival
probabilities (default is 0.99).</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Optional numeric value to set a random seed for reproducibility.
If <code>NULL</code> (default), no seed is set.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble containing bin-level statistics including:</p><ul><li><p><code>bin_number</code>: The bin to which each record was assigned.</p></li>
<li><p><code>TA_b</code>: Total alive in each bin (number of patients who survived).</p></li>
<li><p><code>TD_b</code>: Total dead in each bin (number of patients who did not survive).</p></li>
<li><p><code>N_b</code>: Total number of patients in each bin.</p></li>
<li><p><code>EM_b</code>: Estimated mortality rate for each bin (TD_b / (TA_b + TD_b)).</p></li>
<li><p><code>AntiS_b</code>: The anticipated survival rate for each bin.</p></li>
<li><p><code>AntiM_b</code>: The anticipated mortality rate for each bin.</p></li>
<li><p><code>bin_start</code>: The lower bound of the survival probability range for each
bin.</p></li>
<li><p><code>bin_end</code>: The upper bound of the survival probability range for each
bin.</p></li>
<li><p><code>midpoint</code>: The midpoint of the bin range (calculated as
(bin_start + bin_end) / 2).</p></li>
<li><p><code>R_b</code>: The width of each bin (bin_end - bin_start).</p></li>
<li><p><code>population_RMM_LL</code>: The lower bound of the 95% confidence interval for
the population RMM.</p></li>
<li><p><code>population_RMM</code>: The final calculated Relative Mortality Metric for the
population existing in <code>data</code>.</p></li>
<li><p><code>population_RMM_UL</code>: The upper bound of the 95% confidence interval for
the population RMM.</p></li>
<li><p><code>population_CI</code>: The confidence interval width for the population RMM.</p></li>
<li><p><code>bootstrap_RMM_LL</code>: The lower bound of the 95% confidence interval for
the bootstrap RMM.</p></li>
<li><p><code>bootstrap_RMM</code>: The average RMM value calculated for the bootstrap
sample.</p></li>
<li><p><code>bootstrap_RMM_UL</code>: The upper bound of the 95% confidence interval for
the bootstrap RMM.</p></li>
<li><p><code>bootstrap_CI</code>: The width of the 95% confidence interval for the
bootstrap RMM.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Like other statistical computing functions, <code>rm_bin_summary()</code> is happiest
without missing data.  It is best to pass complete probability of survival
and outcome data to the function for optimal performance. With smaller
datasets, this is especially helpful.  However, <code>rm_bin_summary()</code> will
handle <code>NA</code> values and throw a warning about missing probability of survival
values, if any exist in <code>Ps_col</code>.</p>
<p>Due to the use of bootstrap sampling within the function, users should
consider setting the random number seed within <code>rm_bin_summary()</code> using the
<code>seed</code> argument for reproducibility.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Kassar, O.M., Eklund, E.A., Barnhardt, W.F., Napoli, N.J., Barnes, L.E.,
Young, J.S. (2016). Trauma survival margin analysis: A dissection of trauma
center performance through initial lactate. The American Surgeon, 82(7),
649-653. <a href="doi:10.1177/000313481608200733">doi:10.1177/000313481608200733</a></p>
<p>Napoli, N. J., Barnhardt, W., Kotoriy, M. E., Young, J. S., &amp; Barnes, L. E.
(2017). Relative mortality analysis: A new tool to evaluate clinical
performance in trauma centers. IISE Transactions on Healthcare Systems
Engineering, 7(3), 181–191. <a href="doi:10.1080/24725579.2017.1325948">doi:10.1080/24725579.2017.1325948</a></p>
<p>Schroeder, P. H., Napoli, N. J., Barnhardt, W. F., Barnes, L. E., &amp; Young, J.
S. (2018). Relative mortality analysis of the “golden hour”: A comprehensive
acuity stratification approach to address disagreement in current literature.
Prehospital Emergency Care, 23(2), 254–262.
<a href="doi:10.1080/10903127.2018.1489021">doi:10.1080/10903127.2018.1489021</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="rmm.html">rmm()</a></code>, and <code><a href="nonlinear_bins.html">nonlinear_bins()</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Nicolas Foss, Ed.D, MS, original implementation in MATLAB by Nicholas
J. Napoli, Ph.D., MS</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Generate example data with high negative skewness</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">10232015</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Parameters</span></span></span>
<span class="r-in"><span><span class="va">n_patients</span> <span class="op">&lt;-</span> <span class="fl">10000</span>  <span class="co"># Total number of patients</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Ps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n_patients</span>, mean <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                    sd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span></span>
<span class="r-in"><span>                    <span class="op">)</span>  <span class="co"># Skewed towards higher values</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simulate survival outcomes based on Ps</span></span></span>
<span class="r-in"><span><span class="va">survival_outcomes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_patients</span>,</span></span>
<span class="r-in"><span>                            size <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                            prob <span class="op">=</span> <span class="va">Ps</span></span></span>
<span class="r-in"><span>                            <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create data frame</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Ps <span class="op">=</span> <span class="va">Ps</span>, survival <span class="op">=</span> <span class="va">survival_outcomes</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>death <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">survival</span> <span class="op">==</span> <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example usage of the `rm_bin_summary` function</span></span></span>
<span class="r-in"><span><span class="fu">rm_bin_summary</span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>, Ps_col <span class="op">=</span> <span class="va">Ps</span>,</span></span>
<span class="r-in"><span>               outcome_col <span class="op">=</span> <span class="va">survival</span>,</span></span>
<span class="r-in"><span>               n_samples <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>               Divisor1 <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>               Divisor2 <span class="op">=</span> <span class="fl">4</span></span></span>
<span class="r-in"><span>               <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 9 × 19</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   bin_number  TA_b  TD_b   N_b    EM_b AntiS_b AntiM_b bin_start bin_end</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>          1   565   832  <span style="text-decoration: underline;">1</span>397 0.596     0.417   0.583   0.008<span style="text-decoration: underline;">14</span>   0.592</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>          2   969   427  <span style="text-decoration: underline;">1</span>396 0.306     0.681   0.319   0.592     0.756</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>          3  <span style="text-decoration: underline;">1</span>096   300  <span style="text-decoration: underline;">1</span>396 0.215     0.804   0.196   0.756     0.846</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>          4  <span style="text-decoration: underline;">1</span>206   188  <span style="text-decoration: underline;">1</span>394 0.135     0.875   0.125   0.846     0.900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>          5   898    94   992 0.094<span style="text-decoration: underline;">8</span>    0.916   0.084   0.900     0.932</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span>          6   945    47   992 0.047<span style="text-decoration: underline;">4</span>    0.944   0.056   0.932     0.955</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span>          7   961    31   992 0.031<span style="text-decoration: underline;">2</span>    0.965   0.035   0.955     0.974</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span>          8   983     9   992 0.009<span style="text-decoration: underline;">07</span>   0.982   0.018   0.974     0.990</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">9</span>          9   446     3   449 0.006<span style="text-decoration: underline;">68</span>   0.994   0.006   0.990     1.00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 10 more variables: midpoint &lt;dbl&gt;, R_b &lt;dbl&gt;, population_RMM_LL &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   population_RMM &lt;dbl&gt;, population_RMM_UL &lt;dbl&gt;, population_CI &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   bootstrap_RMM_LL &lt;dbl&gt;, bootstrap_RMM &lt;dbl&gt;, bootstrap_RMM_UL &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   bootstrap_CI &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create example grouping variable (e.g., hospital)</span></span></span>
<span class="r-in"><span><span class="va">hospital</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hospital A"</span>, <span class="st">"Hospital B"</span><span class="op">)</span>, <span class="va">n_patients</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create data frame</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Ps <span class="op">=</span> <span class="va">Ps</span>,</span></span>
<span class="r-in"><span>                  survival <span class="op">=</span> <span class="va">survival_outcomes</span>,</span></span>
<span class="r-in"><span>                  hospital <span class="op">=</span> <span class="va">hospital</span></span></span>
<span class="r-in"><span>                  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>death <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">survival</span> <span class="op">==</span> <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example usage of the `rm_bin_summary` function with grouping</span></span></span>
<span class="r-in"><span><span class="fu">rm_bin_summary</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data</span>,</span></span>
<span class="r-in"><span>  Ps_col <span class="op">=</span> <span class="va">Ps</span>,</span></span>
<span class="r-in"><span>  outcome_col <span class="op">=</span> <span class="va">survival</span>,</span></span>
<span class="r-in"><span>  group_vars <span class="op">=</span> <span class="st">"hospital"</span>, <span class="co"># Stratifies by hospital</span></span></span>
<span class="r-in"><span>  n_samples <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  Divisor1 <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>  Divisor2 <span class="op">=</span> <span class="fl">4</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 18 × 20</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    hospital   bin_number  TA_b  TD_b   N_b    EM_b AntiS_b AntiM_b bin_start</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Hospital A          1   296   428   724 0.591     0.417   0.583   0.008<span style="text-decoration: underline;">14</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> Hospital A          2   488   201   689 0.292     0.682   0.318   0.592  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> Hospital A          3   558   150   708 0.212     0.804   0.196   0.756  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> Hospital A          4   591    88   679 0.130     0.876   0.124   0.846  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> Hospital A          5   441    52   493 0.105     0.916   0.084   0.900  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> Hospital A          6   471    20   491 0.040<span style="text-decoration: underline;">7</span>    0.944   0.056   0.932  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> Hospital A          7   471    20   491 0.040<span style="text-decoration: underline;">7</span>    0.964   0.036   0.955  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> Hospital A          8   505     5   510 0.009<span style="text-decoration: underline;">80</span>   0.982   0.018   0.974  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> Hospital A          9   229     2   231 0.008<span style="text-decoration: underline;">66</span>   0.994   0.006   0.990  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> Hospital B          1   269   404   673 0.600     0.416   0.584   0.008<span style="text-decoration: underline;">14</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> Hospital B          2   481   226   707 0.320     0.68    0.32    0.592  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> Hospital B          3   538   150   688 0.218     0.805   0.195   0.756  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> Hospital B          4   615   100   715 0.140     0.875   0.125   0.846  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> Hospital B          5   457    42   499 0.084<span style="text-decoration: underline;">2</span>    0.917   0.083   0.900  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> Hospital B          6   474    27   501 0.053<span style="text-decoration: underline;">9</span>    0.944   0.056   0.932  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> Hospital B          7   490    11   501 0.022<span style="text-decoration: underline;">0</span>    0.965   0.035   0.955  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span> Hospital B          8   478     4   482 0.008<span style="text-decoration: underline;">30</span>   0.983   0.017   0.974  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span> Hospital B          9   217     1   218 0.004<span style="text-decoration: underline;">59</span>   0.994   0.006   0.990  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 11 more variables: bin_end &lt;dbl&gt;, midpoint &lt;dbl&gt;, R_b &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   population_RMM_LL &lt;dbl&gt;, population_RMM &lt;dbl&gt;, population_RMM_UL &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   population_CI &lt;dbl&gt;, bootstrap_RMM_LL &lt;dbl&gt;, bootstrap_RMM &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   bootstrap_RMM_UL &lt;dbl&gt;, bootstrap_CI &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicolas Foss.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

